<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hidden Game</title>
</head>
<body>
    <script>

        function computerPlay() {
            const choice = ['Rock', 'Paper', 'Scissors'];
            let random = Math.floor(Math.random() * 3);
            if (random === 3) {
                return choice[2]
            }
            else return choice[random]
        }

        function playRound(playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase();
            playerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);
            if ( (playerSelection == 'Rock' && computerSelection == 'Scissors') ||
                 (playerSelection == 'Paper' && computerSelection == 'Rock') ||
                 (playerSelection == 'Scissors' && computerSelection == 'Paper') ) {
                return `You win! ${playerSelection} beats ${computerSelection}`;
            } else if ( (playerSelection == 'Rock' && computerSelection == 'Paper') ||
                        (playerSelection == 'Paper' && computerSelection == 'Scissors') ||
                        (playerSelection == 'Scissors' && computerSelection == 'Rock') ) {
                return `You lose! ${computerSelection} beats ${playerSelection}`;
            } else if (playerSelection == computerSelection) {
                return 'Draw!';
            } else {
                return 'Invalid option. Try again.';
            }
        }

        function game() {
            let playerScore = 0;
            let computerScore = 0;
            let message;

            for (let i = 1; i<=5; i++) {
                let playerSelection = window.prompt('Choose one: Rock, Paper, Scissors');
                let computerSelection = computerPlay();
                let roundResult = playRound(playerSelection, computerSelection);

               if (roundResult.includes('win')) {
                    playerScore++;
                } else if (roundResult.includes('lose')) {
                    computerScore++;
                }
                console.log(`Round ${i}: \nYou chose ${playerSelection} \nComputer chose ${computerSelection} \n${roundResult}`);
                console.log(`Your score: ${playerScore}`);
                console.log(`Computer score: ${computerScore}`);
            }

            if (playerScore > computerScore) {
                message = 'You won the game!';
            }
            else if (playerScore < computerScore) {
                message = 'You lost the game :(';
            }
            else message = 'Draw';

            return `End result:
                    \nYour score: ${playerScore} \nComputer score: ${computerScore}
                    \n${message}`;
            
        }

    </script>
</body>
</html>